# Duckov-Mod---useQchangeweapon
《逃离鸭科夫》模组 按Q切换至最近武器
https://steamcommunity.com/sharedfiles/filedetails/?id=3597205849

## 模拟 CS 和 CF 的切枪习惯，按“Q键”切换至最近使用武器，如“ 大狙 →Q→ 刀 →Q→ 大狙 ”
目前支持 “主武器、副武器、近战武器、道具（如手雷、卡祖笛等）” 的相互切换

在进入游戏（藏身处）以后，按住“Z键+X键”再按C键（Z+X+C）从屏幕左上角弹出“Q键”绑定窗口，目前支持键盘按键绑定。

通过玩家自己的操作，强化笨重武器的灵活性，让切刀跑路、扔道具等操作更顺手。

已知问题：还有点卡手。开打前，建议先主动切换武器、试下Q键，防止在战斗中途卡手 awa

个人代码能力很菜，有问题不一定能解决，但欢迎大家反馈。

## 更新相关
2025.11.21：手感优化 —— 先检测对应槽位是否存在武器再运行Q键逻辑。卸下被记录武器后，后续切换其他武器更顺畅。

2025.11.7：“Q键”自定义绑定 —— 在进入游戏（藏身处）以后，按住Z+X再按C（Z+X+C）在屏幕左上角弹出绑定小窗口，目前支持键盘按键绑定。

2025.11.3：手感优化，解决“当玩家处于无法切换武器时按下Q键，让后续Q键逻辑错误”的严重问题。

2025.11.3：已支持投掷物快捷切换，可以从武器与手雷之间快捷切换。

2025.11.2：直接使用游戏内键位，无需改键，仅Q键被模组占用无法自由使用

## 本人代码基础约等于0，命名不规范等坏习惯请勿学习

思路：订阅 CharacterInputControl 的 inputaction 回调判断玩家行为，记录数值，进行对调后，使用 CharacterMainControl.Main 控制玩家角色。

检测输入用的方法不算好，检测按键输入治标不治本，没法兼容直接按键以外的其他武器切换方式，还将初始化扔进了update里。

更理想应该是检测“切换到什么东西的具体方法”而不是“检测按下什么按键”，这样滚轮和其他模组的其他切换输入方式也能适用，但没做出来。
